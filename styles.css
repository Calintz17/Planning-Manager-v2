/* =========================
   Base / Variables
   ========================= */
:root{
  --bg:#f7f7fb;
  --card:#fff;
  --text:#111;
  --muted:#666;
  --border:#e5e7eb;
  --accent:#111;

  --ok:#059669;
  --ok-bg:#ecfdf5;
  --warn:#b45309;
  --warn-bg:#fffbeb;
  --err:#dc2626;
  --err-bg:#fef2f2;

  --btn:#111;          /* bouton principal */
  --btn-text:#fff;
  --btn-secondary:#fff;
  --btn-secondary-border:#d1d5db;

  --task-border:#e5e7eb;
  --shadow:0 1px 2px rgba(0,0,0,.06), 0 4px 16px rgba(0,0,0,.06);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  background:var(--bg);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

.container{max-width:1200px;margin:0 auto;padding:16px}

/* =========================
   Header / Footer
   ========================= */
.site-title{
  display:flex;align-items:baseline;gap:10px;
  padding:8px 0 16px;
}
.site-title .brand{font-weight:700}
.site-title .tagline{color:var(--muted);font-size:.95rem}
.footer{
  text-align:center;color:var(--muted);
  padding:24px 0;font-size:.9rem;
}

/* =========================
   Tabs
   ========================= */
.tabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
.tab-btn{
  padding:8px 12px;border:1px solid var(--border);background:#fff;border-radius:8px;cursor:pointer;
}
.tab-btn.active{
  background:var(--accent);color:#fff;border-color:var(--accent);
}
.tab-panel{background:transparent}

/* =========================
   Cards / Sections
   ========================= */
.forecast-section-card, .card, .table-wrapper, .wp-grid-wrap{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:12px;
  box-shadow:var(--shadow);
  padding:12px;
  margin-bottom:12px;
}
.section-header{margin:4px 0 8px}
.section-header .muted{color:var(--muted)}

/* =========================
   Buttons / Inputs
   ========================= */
.btn, button, .mini{
  font:inherit;cursor:pointer;border-radius:10px;
  border:1px solid var(--btn-secondary-border);
  background:var(--btn-secondary);
  padding:8px 12px;
}
.btn.primary, .primary{background:var(--btn);color:var(--btn-text);border-color:var(--btn)}
.btn.secondary, .secondary{background:#fff;color:var(--text)}
.btn.danger, .danger{background:#fff;color:var(--err);border-color:#fecaca}
button:disabled{opacity:.6;cursor:not-allowed}

.input, input, select, textarea{
  font:inherit;border:1px solid var(--border);border-radius:10px;background:#fff;color:var(--text);
  padding:8px 10px; width:100%;
}
label{display:block;font-size:.9rem;color:var(--text);margin-bottom:4px}
.field{display:flex;flex-direction:column;gap:6px}
.row{display:flex;gap:8px;align-items:center}

/* Switch */
.switch{position:relative;display:inline-block;width:44px;height:24px}
.switch input{display:none}
.switch .slider{
  position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#e5e7eb;border-radius:24px;transition:.2s;
}
.switch .slider:before{
  content:"";position:absolute;height:18px;width:18px;left:3px;top:3px;background:white;border-radius:50%;transition:.2s;box-shadow:0 1px 2px rgba(0,0,0,.15);
}
.switch input:checked + .slider{background:#111}
.switch input:checked + .slider:before{transform:translateX(20px)}
.switch-label{margin-left:8px;vertical-align:middle}

/* =========================
   Tables
   ========================= */
.table{width:100%;border-collapse:separate;border-spacing:0}
.table th, .table td{border-bottom:1px solid var(--border);padding:8px;vertical-align:middle}
.table thead th{background:#fafafa;color:var(--text);font-weight:600}
.table tr:last-child td{border-bottom:none}
.table .first-col{position:sticky;left:0;background:#fff;z-index:1}

/* =========================
   Attendance
   ========================= */
#att-table .day-head{font-weight:700;font-size:.9rem}
#att-table .req-available{color:var(--muted);font-size:.85rem}
#att-table .warn-flag{display:inline-block;background:var(--warn-bg);color:var(--warn);border:1px solid #f3d9a8;border-radius:6px;padding:2px 6px;margin-top:4px}

.cell-present{background:var(--ok-bg)}
.cell-pto{background:var(--err-bg)}
.cell-pto-half{
  background:linear-gradient(90deg, var(--err-bg) 50%, var(--ok-bg) 50%);
}

/* =========================
   Week Planner
   ========================= */
.wp-toolbar{display:flex;gap:8px;align-items:end;flex-wrap:wrap}
.wp-summaries{display:flex;gap:8px;align-items:center}
.wp-chip{
  display:inline-flex;gap:8px;align-items:baseline;border:1px solid var(--border);border-radius:999px;padding:6px 10px;background:#fff;
}
.wp-chip .k{color:var(--muted);font-size:.85rem}
.wp-chip .v{font-weight:700}

.legend{display:flex;gap:12px;align-items:center;color:var(--muted);font-size:.9rem}
.legend-box{display:inline-block;width:14px;height:14px;border-radius:3px;border:1px solid var(--border);vertical-align:middle;margin-right:4px}
.legend .present{background:var(--ok-bg)}
.legend .gap{background:var(--warn-bg)}
.legend .over{background:#eef2ff;border-color:#c7d2fe}
.legend .pto{background:var(--err-bg)}

.wp-grid{width:100%;border-collapse:separate;border-spacing:0}
.wp-grid th, .wp-grid td{border-bottom:1px solid var(--border);padding:0}
.wp-grid thead th{background:#fafafa;font-weight:600;font-size:.85rem}
.wp-grid .first-col{position:sticky;left:0;background:#fff;z-index:1;padding:8px;border-right:1px solid var(--border);min-width:220px}
.wp-grid .slot-col{min-width:44px;text-align:center;border-left:1px solid var(--border)}
.wp-grid .hour-marker{background:#fcfcfc}

.wp-grid .cell{width:100%;height:28px}
.wp-grid .cell.present{background:var(--ok-bg)}
.wp-grid .cell.gap{background:var(--warn-bg)}
.wp-grid .cell.over{background:#eef2ff}

/* =========================
   PTO Drawer
   ========================= */
.drawer{
  position:fixed;top:0;right:0;bottom:0;width:420px;max-width:100vw;background:transparent;
  transform:translateX(100%);transition:transform .25s ease;z-index:60;
}
.drawer.open{transform:translateX(0)}
.drawer-inner{
  height:100%;background:#fff;border-left:1px solid var(--border);box-shadow:var(--shadow);display:flex;flex-direction:column;
}
.drawer-head{
  display:flex;align-items:center;justify-content:space-between;padding:12px;border-bottom:1px solid var(--border)
}
.drawer-content{padding:12px;overflow:auto}
#pto-calendar{border:1px solid var(--border);border-radius:10px;padding:8px}
.mini-cal-grid{
  display:grid;grid-template-columns:repeat(7,1fr);gap:4px;font-size:.9rem
}
.mini-cal-cell{
  background:#fff;border:1px solid var(--border);border-radius:6px;height:34px;display:flex;align-items:center;justify-content:center
}
.mini-cal-cell.pto{background:var(--err-bg)}
.mini-cal-cell.pto-half{background:linear-gradient(90deg, var(--err-bg) 50%, #fff 50%)}

/* =========================
   Forecast tables
   ========================= */
.forecast-toolbar{display:flex;gap:12px;align-items:end;flex-wrap:wrap;margin-bottom:8px}
.forecast-table{overflow:auto}
.forecast-table table{width:100%;border-collapse:separate;border-spacing:0}
.forecast-table th, .forecast-table td{border-bottom:1px solid var(--border);padding:6px}
.forecast-table input[type="number"]{min-width:80px}
.muted{color:var(--muted)}

/* =========================
   Tasks (catalogue + board)
   ========================= */
.tasks.toolbar{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.tasks.counters{display:flex;gap:12px;align-items:center}
.counter{color:var(--muted)}
.table-tasks td input[type="text"],
.table-tasks td input[type="number"],
.table-tasks td select{width:100%}
.row-actions{display:flex;gap:6px;justify-content:flex-end}

.task-list{display:flex;flex-direction:column;gap:8px}
.task-item{
  border:1px solid var(--task-border);border-radius:10px;background:#fff;padding:10px;display:flex;justify-content:space-between;gap:10px
}
.task-main{display:flex;gap:10px}
.task-title{font-weight:600}
.task-meta{display:flex;flex-wrap:wrap;gap:6px;margin-top:4px}
.task-notes{color:var(--muted);margin-top:6px}
.task-actions{display:flex;gap:8px;align-items:center}

.chip{
  display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);border-radius:999px;padding:4px 8px;background:#fff;font-size:.85rem
}
.status-open{border-color:#d1fae5;background:#f0fdf4}
.status-progress{border-color:#dbeafe;background:#eff6ff}
.status-done{border-color:#e5e7eb;background:#f9fafb}
.prio-low{border-color:#e5e7eb}
.prio-med{border-color:#d1d5db}
.prio-high{border-color:#fecaca;background:#fef2f2}

/* =========================
   Cards / Metrics
   ========================= */
.cards-grid{
  display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin:8px 0
}
.card-title{color:var(--muted);font-size:.9rem}
.card-value{font-weight:800;font-size:1.4rem}
.card .muted{color:var(--muted)}
.card-header{display:flex;gap:8px;align-items:center}

/* Badges */
.badge{
  display:inline-block;padding:2px 8px;border-radius:999px;border:1px solid var(--border);background:#fff;font-size:.8rem
}
.badge.success{background:var(--ok-bg);border-color:#bbf7d0}
.badge.muted{background:#f9fafb}

/* =========================
   Modals (auth + dialogs)
   ========================= */
.modal-backdrop{
  position:fixed;inset:0;background:rgba(0,0,0,.25);
  display:none;align-items:center;justify-content:center;padding:16px;z-index:70;
}
.modal-backdrop.visible{display:flex}
.modal{
  background:#fff;border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);
  padding:16px;max-width:420px;width:100%;
}
.modal .input{width:100%}

dialog.modal{
  border:none;border-radius:12px;padding:0;box-shadow:var(--shadow);max-width:720px;width:min(720px,94vw);
}
.modal-box{padding:12px}
.modal-header{display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--border);padding:8px 4px 10px 4px}
.modal-actions{display:flex;gap:8px;justify-content:flex-end;padding-top:10px}
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:12px}
.form-field{display:flex;flex-direction:column;gap:6px}

/* =========================
   Utilities
   ========================= */
.grid-1-3{display:grid;grid-template-columns:2fr 2fr auto;gap:8px}
.grow{flex:1 1 auto}
.ghost{background:#fff;border:1px solid var(--border)}
hr{border:none;border-top:1px solid var(--border);margin:12px 0}

/* =========================
   Responsive
   ========================= */
@media (max-width: 860px){
  .grid-1-3{grid-template-columns:1fr}
  .cards-grid{grid-template-columns:1fr}
  .form-grid{grid-template-columns:1fr}
  .wp-grid .first-col{min-width:160px}
  .tab-btn{flex:1 0 auto}
}
