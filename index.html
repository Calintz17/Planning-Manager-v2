<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>ROMAN — Planning Manager</title>
  <link rel="stylesheet" href="style.css"/>

  <!-- Fonts (optionnel) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <header class="site-header">
    <div class="container head-wrap">
      <h1>ROMAN — Planning Manager</h1>
      <nav class="tabs">
        <button class="tab-btn active" data-tab="attendance">Attendance</button>
        <button class="tab-btn" data-tab="agents">Agents</button>
        <button class="tab-btn" data-tab="weekly">Weekly Planner</button>
        <button class="tab-btn" data-tab="forecast">Forecast</button>
        <button class="tab-btn" data-tab="regulation">Regulation</button>
        <button class="tab-btn" data-tab="tasks">Tasks</button>
      </nav>
    </div>
  </header>

  <main class="container">

    <!-- ============== ATTENDANCE ============== -->
    <section id="attendance" class="tab-panel">
      <div class="toolbar">
        <div class="field">
          <label>Region</label>
          <select id="att-region">
            <option value="EMEA">Europe</option>
            <option value="US">Americas</option>
            <option value="CN">Greater China</option>
            <option value="JP">Japan</option>
            <option value="KR">South Korea</option>
            <option value="SEAO">Southeast Asia</option>
          </select>
        </div>
        <div class="field">
          <label>Mois (1er jour)</label>
          <input id="att-start" type="date"/>
        </div>
        <button id="att-calc" class="btn">Calculer</button>

        <div class="spacer"></div>

        <div class="adherence-box">
          <div class="adherence-top">
            Adherence moyenne :
            <strong id="adherence-label">0%</strong>
          </div>
          <div class="adherence-bar">
            <div id="adherence-fill" class="adherence-fill" style="width:0%"></div>
          </div>
        </div>

        <button id="att-export" class="btn ghost">Exporter CSV</button>
      </div>

      <div class="panel">
        <div class="panel-head">
          <h2>Résumé mensuel</h2>
          <div id="att-warnings" class="muted">—</div>
        </div>
        <div class="table-wrap">
          <table id="att-table" class="matrix"></table>
        </div>
      </div>
    </section>

    <!-- ============== AGENTS ============== -->
    <section id="agents" class="tab-panel" hidden>
      <div class="toolbar">
        <div class="field">
          <label>Region</label>
          <select id="ag-region">
            <option value="EMEA">Europe</option>
            <option value="US">Americas</option>
            <option value="CN">Greater China</option>
            <option value="JP">Japan</option>
            <option value="KR">South Korea</option>
            <option value="SEAO">Southeast Asia</option>
          </select>
        </div>
        <button id="ag-refresh" class="btn">Rafraîchir</button>

        <div class="divider"></div>

        <div class="field">
          <label>Ajouter un agent</label>
          <input id="ag-name" type="text" placeholder="Nom & prénom"/>
        </div>
        <button id="ag-add" class="btn">Ajouter</button>

        <div class="spacer"></div>

        <div class="field">
          <label>PTO — Agent</label>
          <select id="pto-agent"></select>
        </div>
        <div class="field">
          <label>PTO — Début</label>
          <input id="pto-start" type="date"/>
        </div>
        <div class="field">
          <label>PTO — Fin</label>
          <input id="pto-end" type="date"/>
        </div>
        <button id="ag-pto-add" class="btn ghost">Ajouter PTO</button>
      </div>

      <div class="panel">
        <div class="panel-head">
          <h2>Agents & compétences</h2>
        </div>
        <div id="ag-list" class="cards"></div>
      </div>
    </section>

    <!-- ============== WEEKLY PLANNER ============== -->
    <section id="weekly" class="tab-panel" hidden>
      <div class="toolbar">
        <div class="field">
          <label>Region</label>
          <select id="w-region">
            <option value="EMEA">Europe</option>
            <option value="US">Americas</option>
            <option value="CN">Greater China</option>
            <option value="JP">Japan</option>
            <option value="KR">South Korea</option>
            <option value="SEAO">Southeast Asia</option>
          </select>
        </div>
        <div class="field">
          <label>Semaine (lundi)</label>
          <input id="week-start" type="date"/>
        </div>
        <button id="w-run" class="btn">Calculer</button>

        <div class="spacer"></div>
        <div id="week-warnings" class="muted">—</div>
      </div>

      <div class="panel">
        <div class="panel-head">
          <h2>Couverture hebdomadaire (slots 30’)</h2>
        </div>
        <div class="table-wrap">
          <table id="week-grid" class="matrix"></table>
        </div>
      </div>
    </section>

    <!-- ============== FORECAST ============== -->
    <section id="forecast" class="tab-panel" hidden>
      <div class="toolbar">
        <div class="field">
          <label>Region</label>
          <select id="fc-region">
            <option value="EMEA">Europe</option>
            <option value="US">Americas</option>
            <option value="CN">Greater China</option>
            <option value="JP">Japan</option>
            <option value="KR">South Korea</option>
            <option value="SEAO">Southeast Asia</option>
          </select>
        </div>
        <button id="fc-refresh" class="btn">Rafraîchir</button>
        <button id="fc-save" class="btn ghost">Enregistrer</button>
      </div>

      <div class="panel">
        <div class="panel-head">
          <h2>Répartition mensuelle (%)</h2>
        </div>
        <div class="table-wrap narrow">
          <table id="fc-table" class="grid"></table>
        </div>
      </div>
    </section>

    <!-- ============== REGULATION ============== -->
    <section id="regulation" class="tab-panel" hidden>
      <div class="toolbar">
        <div class="field">
          <label>Region</label>
          <select id="reg-region">
            <option value="EMEA">Europe</option>
            <option value="US">Americas</option>
            <option value="CN">Greater China</option>
            <option value="JP">Japan</option>
            <option value="KR">South Korea</option>
            <option value="SEAO">Southeast Asia</option>
          </select>
        </div>
        <button id="reg-refresh" class="btn">Rafraîchir</button>
        <button id="reg-add" class="btn">Ajouter une règle</button>
        <button id="reg-save" class="btn ghost">Enregistrer</button>
      </div>

      <div class="panel">
        <div class="panel-head">
          <h2>Règles & contraintes</h2>
        </div>
        <div class="table-wrap">
          <table id="reg-table" class="grid"></table>
        </div>
      </div>
    </section>

    <!-- ============== TASKS ============== -->
    <section id="tasks" class="tab-panel" hidden>
      <div class="toolbar">
        <div class="field">
          <label>Region</label>
          <select id="tk-region">
            <option value="EMEA">Europe</option>
            <option value="US">Americas</option>
            <option value="CN">Greater China</option>
            <option value="JP">Japan</option>
            <option value="KR">South Korea</option>
            <option value="SEAO">Southeast Asia</option>
          </select>
        </div>
        <button id="tk-refresh" class="btn">Rafraîchir</button>
        <button id="tk-add" class="btn">Ajouter une tâche</button>
        <button id="tk-save" class="btn ghost">Enregistrer</button>
      </div>

      <div class="panel">
        <div class="panel-head">
          <h2>Catalogue des tâches</h2>
        </div>
        <div class="table-wrap">
          <table id="tk-table" class="grid"></table>
        </div>
      </div>
    </section>

  </main>

  <!-- ============== Scripts ============== -->
  <!-- Supabase SDK v2 -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- Config (fourni par toi) : définit window.CONFIG -->
  <script src="config.js"></script>
  <!-- App -->
  <script src="app.js"></script>
</body>
</html>
