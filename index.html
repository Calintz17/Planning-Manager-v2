<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>ROMAN | Resource Optimization & Management Allocation Network</title>

  <!-- Police: Helvetica (fallbacks système) -->
  <style>html, body { font-family: Helvetica, Arial, sans-serif; }</style>

  <!-- Styles globaux -->
  <link rel="stylesheet" href="./styles.css"/>
</head>
<body>
  <!-- Header / Tabs -->
  <header class="app-header">
    <div class="brand">
      <h1 class="site-title">ROMAN | Resource Optimization & Management Allocation Network</h1>
    </div>

    <nav class="tabs">
      <!-- IMPORTANT COULEUR DES TABS : voir styles.css (variable --btn / #1E5631) -->
      <button class="tab-btn" data-tab="attendance">Attendance</button>
      <button class="tab-btn" data-tab="weekly">Weekly Planning</button>
      <button class="tab-btn active" data-tab="agents">Agents</button>
      <button class="tab-btn" data-tab="tasks">Tasks</button>
      <button class="tab-btn" data-tab="forecast">Forecast</button>
      <button class="tab-btn" data-tab="regulation">Regulation</button>
    </nav>
  </header>

  <!-- Main panels -->
  <main class="app-main">
    <!-- ATTENDANCE (v3.2) -->
    <section id="attendance" class="tab-panel">
      <div class="panel-card">
        <h2>Attendance</h2>

        <!-- SETTINGS -->
        <div class="settings-bar">
          <label class="field compact">
            <span>Region</span>
            <select id="att-region">
              <option value="EMEA">Europe</option>
              <option value="US">Americas</option>
              <option value="CN">Greater China</option>
              <option value="JP">Japan</option>
              <option value="KR">South Korea</option>
              <option value="SEAO">Southeast Asia</option>
            </select>
          </label>

          <label class="field compact">
            <span>Start date</span>
            <input id="att-start" type="date"/>
          </label>

          <!-- IMPORTANT COULEUR DU BOUTON : variable --btn (#1E5631) dans styles.css -->
          <button id="att-calc" class="primary">Calculate</button>
        </div>

        <!-- ADHERENCE BAR -->
        <div class="adherence-wrap">
          <div class="adherence-head">
            <span class="adherence-title">Adherence</span>
            <span id="adherence-label" class="adherence-value">– %</span>
          </div>
          <div class="adherence-bar">
            <!-- IMPORTANT COULEURS : --adherence-fill (#1C4966), --adherence-bg (#FFF7E0) -->
            <div id="adherence-fill" class="adherence-fill" style="width:0%"></div>
          </div>
          <small class="adherence-notes">Definition: available agents / required agents (higher is better).</small>
        </div>

        <!-- GRID (3.2 complet) -->
        <div class="calendar-wrap">
          <div class="grid-topbar">
            <div id="att-warnings" class="warning-row"></div>
            <!-- IMPORTANT COULEUR DU BOUTON : variable --btn (#1E5631) dans styles.css -->
            <button id="att-export" class="secondary">Export CSV</button>
          </div>

          <div class="calendar-scroll">
            <table id="att-table" class="calendar-table">
              <!-- Head + body remplis en JS -->
            </table>
          </div>

          <small class="legend">
            Legend:
            <span class="legend-box present"></span> Present
            <span class="legend-box pto"></span> PTO
            <span class="legend-box pto-half"></span> Half-day PTO
          </small>
        </div>
      </div>
    </section>

    <!-- WEEKLY (placeholder – à implémenter après validation) -->
    <section id="weekly" class="tab-panel">
      <div class="panel-card">
        <h2>Weekly Planning</h2>
        <p>Planning hebdo par tranches de 30 minutes. (À venir.)</p>
      </div>
    </section>

    <!-- AGENTS (COMPLET) -->
    <section id="agents" class="tab-panel visible">
      <div class="panel-card">
        <h2>Agents</h2>

        <!-- Directory top bar -->
        <div class="agents-topbar">
          <label class="field compact">
            <span>Region</span>
            <select id="ag-region">
              <option value="EMEA">Europe</option>
              <option value="US">Americas</option>
              <option value="CN">Greater China</option>
              <option value="JP">Japan</option>
              <option value="KR">South Korea</option>
              <option value="SEAO">Southeast Asia</option>
            </select>
          </label>

          <div class="agents-actions">
            <!-- IMPORTANT COULEURS DES BOUTONS : --btn (#1E5631) / --btn-text (#fff) -->
            <button id="ag-add" class="primary">Add agent</button>
            <button id="ag-export" class="secondary">Export CSV</button>
          </div>
        </div>

        <!-- Directory table -->
        <div class="agents-table-wrap">
          <table id="ag-table" class="agents-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Region</th>
                <th>Status</th>
                <th>Call</th>
                <th>Mail</th>
                <th>Chat</th>
                <th>Clienteling</th>
                <th>Fraud</th>
                <th>Back Office</th>
                <th>PTO</th>
                <th>Calendar</th>
                <th>Delete</th>
              </tr>
            </thead>
            <tbody><!-- rempli en JS --></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- TASKS (placeholder) -->
    <section id="tasks" class="tab-panel">
      <div class="panel-card">
        <h2>Tasks</h2>
        <p>Liste des tâches, priorités et AHT. (À venir.)</p>
      </div>
    </section>

    <!-- FORECAST (placeholder) -->
    <section id="forecast" class="tab-panel">
      <div class="panel-card">
        <h2>Forecast</h2>
        <p>Base centrale des volumes + répartitions. (À venir.)</p>
      </div>
    </section>

    <!-- REGULATION (placeholder) -->
    <section id="regulation" class="tab-panel">
      <div class="panel-card">
        <h2>Regulation</h2>
        <p>Règles & lois du travail par région. (À venir.)</p>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="app-footer">
    <small>© Roman Inc.</small>
  </footer>

  <!-- Auth Modal (bloquant tant qu’on n’est pas connecté) -->
  <div id="auth-modal" class="modal-backdrop visible" aria-hidden="false">
    <div class="modal">
      <h3>Sign In</h3>

      <label class="field">
        <span>Username (Email)</span>
        <input id="auth-email" type="email" placeholder="name@company.com" autocomplete="username"/>
      </label>

      <label class="field">
        <span>Password</span>
        <input id="auth-password" type="password" placeholder="••••••••" autocomplete="current-password"/>
      </label>

      <div class="region-row">
        <label class="field">
          <span>Region</span>
          <select id="auth-region">
            <option value="EMEA">Europe</option>
            <option value="US">Americas</option>
            <option value="CN">Greater China</option>
            <option value="JP">Japan</option>
            <option value="KR">South Korea</option>
            <option value="SEAO">Southeast Asia</option>
          </select>
        </label>
      </div>

      <div class="auth-actions">
        <!-- IMPORTANT COULEUR DES BOUTONS : voir styles.css (variables --btn / --btn-text) -->
        <button id="login-btn" class="primary">Log in</button>
        <button id="signup-btn" class="secondary">Sign up</button>
        <a id="forgot-link" href="#" class="muted">Forgot password</a>
      </div>

      <p id="auth-error" class="error" role="alert" aria-live="polite"></p>
    </div>
  </div>

  <!-- PTO Drawer (slide-in) -->
  <aside id="pto-drawer" class="drawer" aria-hidden="true">
    <div class="drawer-inner">
      <div class="drawer-head">
        <h3 id="pto-title">PTO for …</h3>
        <button id="pto-close" class="ghost">✕</button>
      </div>

      <div class="drawer-content">
        <div class="drawer-form">
          <label class="field compact">
            <span>Start date</span>
            <input id="pto-start" type="date"/>
          </label>
          <label class="field compact">
            <span>Start half</span>
            <select id="pto-half-start">
              <option value="">Full day</option>
              <option value="AM">AM</option>
              <option value="PM">PM</option>
            </select>
          </label>
          <label class="field compact">
            <span>End date</span>
            <input id="pto-end" type="date"/>
          </label>
          <label class="field compact">
            <span>End half</span>
            <select id="pto-half-end">
              <option value="">Full day</option>
              <option value="AM">AM</option>
              <option value="PM">PM</option>
            </select>
          </label>
        </div>

        <!-- IMPORTANT COULEUR DU BOUTON : --btn (#1E5631) -->
        <button id="pto-save" class="primary">Save PTO</button>

        <div class="drawer-section">
          <h4>Existing PTO</h4>
          <ul id="pto-list" class="list"></ul>
        </div>

        <div class="drawer-section">
          <h4>Mini Calendar</h4>
          <div id="pto-calendar" class="mini-cal"></div>
          <small class="legend">
            <span class="legend-box pto"></span> PTO
            <span class="legend-box pto-half"></span> Half-day
          </small>
        </div>
      </div>
    </div>
  </aside>

  <!-- JS -->
  <script src="./config.js" type="module"></script>
  <script src="./app.js" type="module"></script>
</body>
</html>
